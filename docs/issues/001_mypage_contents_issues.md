# 마이페이지(My Page) 기능 명세 및 이슈 사항

이 문서는 `001_mypage_contents.md`에 기술되어야 할 마이페이지의 기능 명세를 제안하고, 해당 기능들을 구현할 때 고려해야 할 기술적 이슈와 과제들을 정리합니다.

---

## Part 1: `001_mypage_contents.md`에 포함될 기능 명세 제안

마이페이지는 사용자가 자신의 정보를 확인하고 관리하는 핵심 기능입니다. 다음은 포함되어야 할 주요 기능 목록입니다.

### 1. 회원 정보 관리
- **프로필 보기:** 사용자의 이름, 닉네임, 이메일, 연락처 등 가입 시 입력한 정보를 보여줍니다.
- **프로필 수정:** 사용자가 자신의 닉네임, 연락처 등의 정보를 수정할 수 있는 기능을 제공합니다.
- **비밀번호 변경:** 현재 비밀번호를 확인한 후, 새로운 비밀번호로 변경할 수 있는 기능을 제공합니다.
- **회원 탈퇴:** 사용자가 서비스를 탈퇴할 수 있는 기능을 제공합니다. 탈퇴 시에는 관련 데이터 처리 방침에 대한 안내가 필요합니다.

### 2. 예매 내역 관리
- **예매 목록 조회:** 사용자의 전체 예매 내역을 시간 순서대로 보여줍니다. (최신순 또는 과거순 정렬 기능)
  - 각 항목에는 공연명, 공연일, 예매일, 예매 번호, 총 결제 금액, 예매 상태(예매 완료, 취소됨 등)가 표시되어야 합니다.
- **예매 상세 조회:** 특정 예매 내역을 클릭하면, 예매한 좌석 정보, 공연 장소, 상세 결제 내역 등을 볼 수 있는 상세 페이지로 이동합니다.
- **예매 취소:** 예매 취소 가능 기간 내에 있는 티켓에 대해 사용자가 직접 예매를 취소할 수 있는 기능을 제공합니다. 취소 수수료 정책에 대한 안내가 필요합니다.

### 3. 나의 활동 (선택 사항)
- **찜한 공연:** 사용자가 '하트'나 '찜하기'를 누른 공연 목록을 보여줍니다.
- **공연 후기 관리:** 사용자가 작성한 공연 후기를 모아서 보여주고, 수정 및 삭제할 수 있는 기능을 제공합니다.

---

## Part 2: 기능 구현 시 이슈 및 고려사항

### 1. API 연동 및 데이터 관리
- **엔드포인트 설계:** 마이페이지의 각 기능(회원 정보 조회/수정, 예매 내역 조회 등)을 위한 백엔드 API 엔드포인트가 명확하게 정의되어야 합니다.
- **데이터 로딩 상태 처리:** API 요청이 진행 중일 때(로딩), 성공했을 때, 실패했을 때에 대한 UI(스켈레톤 UI, 로딩 스피너, 에러 메시지 등)를 모두 고려해야 합니다.
- **데이터 캐싱:** 예매 내역과 같이 자주 바뀌지 않는 데이터는 캐싱 전략을 도입하여 불필요한 API 호출을 줄이고 사용자 경험을 개선할 수 있습니다.

### 2. 인증 및 보안
- **민감 정보 수정:** 비밀번호 변경이나 회원 탈퇴와 같이 민감한 작업을 수행하기 전, 사용자의 신원을 다시 한번 확인하는 절차(예: 현재 비밀번호 입력)가 필요합니다.
- **API 접근 제어:** 모든 마이페이지 관련 API는 인증된 사용자만 호출할 수 있도록 백엔드에서 토큰 기반의 접근 제어를 엄격하게 수행해야 합니다.

### 3. UI/UX 및 컴포넌트 설계
- **컴포넌트 분리:** 마이페이지 전체를 하나의 큰 컴포넌트로 만들기보다, '회원 정보 섹션', '예매 내역 목록', '예매 내역 아이템' 등 기능 단위로 컴포넌트를 잘게 분리하여 재사용성과 유지보수성을 높여야 합니다.
- **페이지네이션:** 예매 내역이 많아질 경우를 대비하여, 한 페이지에 모든 내역을 불러오는 대신 페이지네이션(Pagination) 또는 무한 스크롤(Infinite Scroll)을 구현해야 합니다.
- **반응형 디자인:** 모바일, 태블릿, 데스크톱 등 다양한 화면 크기에서 마이페이지의 모든 기능이 정상적으로 보이고 작동하도록 반응형 디자인을 적용해야 합니다.

### 4. 예매 취소 로직의 복잡성
- **취소 정책:** 예매 취소 시, 취소 시점에 따른 수수료 정책을 명확하게 구현하고 사용자에게 안내해야 합니다. (예: 관람일 10일 전: 수수료 없음, 7일 전: 10% 등)
- **상태 관리:** 사용자가 취소를 요청했을 때, API 호출의 성공/실패 여부에 따라 예매 내역의 상태(예: '예매 완료' -> '취소 진행 중' -> '취소 완료')를 실시간으로 UI에 반영해야 합니다.
- **트랜잭션 처리:** 예매 취소는 결제 시스템 연동 해제, 좌석 상태 변경 등 여러 작업이 연관될 수 있으므로, 백엔드에서 트랜잭션(Transaction)으로 안전하게 처리되어야 합니다.

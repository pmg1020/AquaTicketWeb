# Prompt: 마이페이지 기능 구현

**Objective:** 사용자 경험 향상을 위해, 사용자가 자신의 정보와 예매 내역을 관리할 수 있는 마이페이지(`/mypage`)를 구현합니다.

--- 

## **요구사항**

### **1. 기본 구조 및 라우팅**
- `src/pages/MyPage.tsx` 파일을 생성하여 마이페이지의 기본 레이아웃을 구성합니다.
- `MyPage.tsx`는 인증된 사용자만 접근할 수 있어야 합니다. (`RequireAuth` 컴포넌트 활용)
- 페이지 제목은 "마이페이지"로 명확하게 표시합니다.
- 페이지 내부는 **1) 회원 정보 관리**와 **2) 예매 내역** 두 개의 섹션으로 구분합니다.

### **2. 컴포넌트 설계**
- 재사용성과 유지보수를 위해, `src/components/mypage/` 디렉토리를 생성하고 아래와 같이 컴포넌트를 분리하여 개발합니다.
  - **`ProfileSection.tsx`**: 회원 정보 관리 섹션
  - **`BookingHistory.tsx`**: 예매 내역 섹션
  - **`BookingItem.tsx`**: 예매 내역 목록의 개별 항목

### **3. 기능 명세: `ProfileSection.tsx`**
- **UI:**
  - "회원 정보"라는 제목을 표시합니다.
  - 사용자 이름, 닉네임, 이메일, 연락처를 표시합니다. (초기에는 읽기 전용)
  - '수정하기', '비밀번호 변경', '회원 탈퇴' 버튼을 포함합니다.
- **기능:**
  - **데이터 조회:** 페이지 로드 시, `/api/members/me` API를 호출하여 현재 로그인된 사용자의 정보를 가져와 화면에 표시합니다. (로딩 및 에러 상태 처리 필요)
  - **정보 수정:** '수정하기' 버튼 클릭 시, 닉네임과 연락처를 수정할 수 있는 입력 필드로 전환되고, '저장' 버튼이 나타납니다. 저장을 누르면 `/api/members/me` (PATCH) API를 호출하여 정보를 업데이트합니다.
  - **비밀번호 변경:** '비밀번호 변경' 버튼 클릭 시, 현재 비밀번호, 새 비밀번호, 새 비밀번호 확인을 입력받는 모달(또는 섹션)을 표시합니다. '변경' 버튼을 누르면 `/api/members/password` (PATCH) API를 호출합니다.

### **4. 기능 명세: `BookingHistory.tsx` 와 `BookingItem.tsx`**
- **UI:**
  - "예매 내역"이라는 제목을 표시합니다.
  - 예매 내역이 없을 경우, "예매 내역이 없습니다."라는 메시지를 표시합니다.
  - 예매 내역이 있을 경우, `BookingItem` 컴포넌트들을 리스트 형태로 렌더링합니다.
- **기능:**
  - **데이터 조회:** 페이지 로드 시, `/api/bookings/me` API를 호출하여 사용자의 전체 예매 내역 목록을 가져옵니다. (로딩 및 에러 상태 처리 필요)
  - **페이지네이션:** API가 페이지네이션을 지원하는 경우, 페이지 하단에 페이지 번호를 표시하고 페이지 이동 기능을 구현합니다. (1차 구현에서는 생략 가능)
  - **`BookingItem.tsx` 상세:**
    - 각 아이템은 공연 포스터 이미지, 공연명, 공연일, 예매일, 예매 번호, 결제 금액, 예매 상태(예매 완료, 취소됨)를 포함해야 합니다.
    - 아이템 클릭 시, 해당 예매의 상세 페이지(`/mypage/bookings/{bookingId}`)로 이동합니다. (상세 페이지 구현은 별도 과제)

### **5. API 연동 (Mock API 기준)**
- 아래 API 명세를 기준으로 개발을 진행합니다. 실제 API는 백엔드와 협의 후 변경될 수 있습니다.
  - **`GET /api/members/me`**: 현재 사용자 정보 조회
    - **Response:** `{ "name": "홍길동", "nickname": "gildong", "email": "gildong@test.com", "phone": "010-1234-5678" }`
  - **`PATCH /api/members/me`**: 사용자 정보 수정
    - **Request:** `{ "nickname": "new_nickname", "phone": "010-0000-0000" }`
  - **`PATCH /api/members/password`**: 비밀번호 변경
    - **Request:** `{ "currentPassword": "...", "newPassword": "..." }`
  - **`GET /api/bookings/me`**: 예매 내역 조회
    - **Response:** `[{ "bookingId": 1, "posterUrl": "...", "performanceTitle": "...", "viewingDate": "2025-11-20", "bookingDate": "2025-10-23", "bookingNumber": "BK123456", "totalPrice": 50000, "status": "예매 완료" }]`

### **6. 스타일링 및 기타**
- 모든 UI는 **Tailwind CSS**를 사용하여 프로젝트의 다른 페이지와 일관된 디자인을 유지합니다.
- API 요청 중에는 스켈레톤 UI나 로딩 스피너를 표시하여 사용자 경험을 향상시킵니다.
- API 요청 실패 시, `react-hot-toast`를 사용하여 사용자에게 에러 메시지를 명확하게 전달합니다.
